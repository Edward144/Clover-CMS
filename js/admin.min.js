function sidebarcollapse(){if($(window).width()<768){var t=$(".wrapper > .main > .sidebar");t.hide().addClass("collapse-left"),t.on("transitionend",function(){t.show()})}}function responsive_filemanager_callback(t){var i=$("#"+t).val().split(root_dir)[1];$("input[name='"+t+"']").val(i).trigger("change")}$(".sidebar").on("click","#toggleSidebar",function(){var t=$(this).parents(".sidebar").first();t.hasClass("collapse-left")?t.removeClass("collapse-left"):t.addClass("collapse-left")}),$(document).ready(function(){sidebarcollapse()}),$("form").submit(function(){var t=!0;if($(this).find(".invalid-feedback").remove(),$(this).find(".is-invalid").removeClass("is-invalid"),$(this).find("input[name='password']").length&&$(this).find("input[name='passwordConf']").length){var i=$(this).find("input[name='password']"),e=$(this).find("input[name='passwordConf']");(i.val().length||e.val().length)&&(i.val().length<8?(i.addClass("is-invalid"),$("<div class='invalid-feedback'>Password must be at least 8 characters</div>").insertAfter(i),t=!1):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/.test(i.val())?i.val()!=e.val()&&(i.addClass("is-invalid"),e.addClass("is-invalid"),$("<div class='invalid-feedback'>Passwords do not match</div>").insertAfter(e),t=!1):(i.addClass("is-invalid"),$("<div class='invalid-feedback'>Password must contain at least one lowercase, one uppercase and one digit</div>").insertAfter(i),t=!1))}if($(this).find("input[name='url']").length){var a=$(this).find("input[name='url']");/^[a-zA-Z0-9\:\/\-\_\+\?\&\=\#\.]+$/.test(a.val())||(a.addClass("is-invalid"),$("<div class='invalid-feedback'>Url contains invalid characters. Allowed characters are A-Z, 0-9, :, /, -, _, +, ?, &, =, #, .</div>").insertAfter(a),t=!1)}0!=t||event.preventDefault()}),$("input[name='url']").keyup(function(){var t=$(this);t.removeClass("is-invalid"),t.siblings(".invalid-feedback").remove(),/^[a-zA-Z0-9\:\/\-\_\+\?\&\=\#\.]+$/.test(t.val())||(t.addClass("is-invalid"),$("<div class='invalid-feedback'>Url contains invalid characters. Allowed characters are A-Z, 0-9, :, /, -, _, +, ?, &, =, #, .</div>").insertAfter(t))}),$("input[type='submit'][data-confirm]").click(function(){confirm($(this).attr("data-confirm"))||event.preventDefault()}),$("input[name='clearSearch'],input[name='returnList']").click(function(){window.location.href=window.location.href.split("?")[0]}),$("input[name='deleteContent']").click(function(){var t=$(this);confirm("Are you sure you want to delete this content?")&&t.attr("data-id").length&&$.ajax({url:window.location.pathname,method:"post",dataType:"json",data:{id:$(this).attr("data-id"),method:"deleteContent"},success:function(i){if("success"==i.status)location.reload();else{var e="<div class='alert alert-"+i.status+"'>"+i.message+"</div>";t.parents("table").first().length>0?(t.parents("table").first().find(".alert").remove(),$(e).insertBefore(t.parents("table").first())):(t.parents("form").first().find(".alert").remove(),$(e).appendTo(t.parents("form").first()))}}})}),$(".countChars").keyup(function(){var t=$(this).attr("maxlength"),i=$(this).val().length;$(this).siblings("small.charCount").length?$(this).siblings("small.charCount").text(i+" of "+t):$("<small class='charCount d-block text-end'>"+i+" of "+t+"</small>").insertAfter($(this))}),$("#otherSettings").submit(function(){var t=!0,i=$(this).find("input[name='googleAnalytics']");i.val().length&&!/^[A-Z]{2}\-[0-9]{8}\-[0-9]$/.test(i.val())&&(i.addClass("is-invalid"),$("<div class='invalid-feedback'>Value does not appear to be valid</div>").insertAfter(i),t=!1),0!=t||event.preventDefault()}),$("select[name='chooseMenu']").change(function(){window.location.href=window.location.href.split("manage-navigation/")[0]+"manage-navigation/"+$(this).val()}),$("#insertNavigation select[name='existing']").change(function(){var t=$(this).children(":selected"),i=t.attr("data-name"),e=t.attr("data-url");$("#insertNavigation").find("input[name='name']").val(i),$("#insertNavigation").find("input[name='url']").val(e)}),$(".structure").on("click","button[name='edit']",function(){$(this).parents(".navigationLevel").first().find(".modal").first().modal("show")}),$(".structure").on("click","button[name='delete']",function(){confirm("Are you sure you want to delete this item?")&&($(this).parents(".navigationLevel").first().find("input[name='delete']").first().val(1),$(this).parents(".navigationLevel").first().hide())}),$(".structureItems").sortable({items:".navigationLevel",connectWith:".structureItems",dropOnEmpty:!0,stop:function(){$(".structure .navigationLevel").each(function(){var t=$(this).prevAll(".navigationLevel").length,i=$(this).find(".modal").first();if($(this).parent().is(".structure"))var e=0;else e=$(this).parents(".navigationLevel").first().attr("data-id");i.find("input[name='parent']").val(e),i.find("input[name='position']").val(t)})}}),$(".structure input[name='saveStructure']").click(function(){var t={},i=$(this),e=$(this).parents(".structure").first(),a=0;if(e.find(".alert").remove(),e.find(".navigationLevel").each(function(){var i=$(this).children(".modal").first();t[a]={id:i.find("input[name='id']").val(),name:i.find("input[name='name']").val(),url:i.find("input[name='url']").val(),visible:i.find("select[name='visible']").val(),parent:i.find("input[name='parent']").val(),position:i.find("input[name='position']").val(),delete:i.find("input[name='delete']").val()},a++}),e.find(".is-invalid").length||e.find(".invalid-feedback").length)return event.preventDefault(),void $("<div class='alert alert-danger mt-3'>You have entered invalid information. Please check your inputs and try again.</div>").insertAfter(i.parent(".form-group"));e.find("input[name='json']").val(JSON.stringify(t))});