function sidebarcollapse(){if($(window).width()<768){var t=$(".wrapper > .main > .sidebar");t.hide().addClass("collapse-left"),setTimeout(function(){t.show()},70)}}function responsive_filemanager_callback(t){var e=$("#"+t).val();$("input[name='"+t+"']").val(e).trigger("change")}function formbuilder_generaterandom(){return btoa((new Date).getTime()).split("=")[0]}function formbuilder_save(t,e="",a=!1){var n={};e=""==e?$(".formbuilder").first():e,n.formid=e.children(".list-group").children(".actions").find("input[name='formid']").val(),n.action=e.children(".list-group").children(".actions").find("input[name='action']").val(),n.method=e.children(".list-group").children(".actions").find("select[name='method']").val();var i=[],s=0;e.children(".list-group").children(".list-group-item:not(.actions)").each(function(){var t=[],e=0;$(this).children(".inputs").children(".input").each(function(){var a={};if($(this).find("input:not([type='button']):not([type='submit']), textarea, checkbox").each(function(){if(!$(this).parents(".list-group-item").first().hasClass("option")){var t=$(this).attr("name");if($(this).is(":checkbox"))if($(this).is(":checked"))var e=!0;else e=!1;else e=$(this).val();a[t]=e}}),$(this).find(".options").length){var n=[];$(this).find(".option").each(function(){if($(this).find(":radio").length){if($(this).find(":radio:checked").length)var t=!0;else t=!1;n.push({value:$(this).find("input[name='optionvalue']").first().val(),default:t})}else n.push({value:$(this).find("input[name='optionvalue']").first().val()})}),a.options=n}t[e]=a,e++}),i[s]={groupid:$(this).find("input[name='groupid']").first().val(),name:$(this).find("input[name='groupname']").first().val(),inputs:t},s++}),n.groups=i,1==a?console.log(n):t.val(JSON.stringify(n))}function formbuilder_addgroup(t){var e=$(".formbuilder").children(".groups").children(".group").length+1,a={groupid:formbuilder_generaterandom(),name:"Group "+e,inputs:[]};$.ajax({url:root_dir+"includes/classes/formbuilder.class.php",method:"post",dataType:"json",data:{id:$(this).parent(".structure").first().find("input[name='formid']").val(),data:JSON.stringify(a),formbuilder_method:"addGroup"},success:function(e){$(e).insertBefore(t.parents(".list-group-item").first()),formbuilder_disablesubmit(),formbuilder_sortable($(".groups"))}})}function formbuilder_addinput(t,e="",a={}){a.type=""==e?t.siblings("select[name='inputType']").val():e,a.inputid=formbuilder_generaterandom(),$.ajax({url:root_dir+"includes/classes/formbuilder.class.php",method:"post",dataType:"json",data:{id:$(this).parent(".structure").first().find("input[name='formid']").val(),data:JSON.stringify(a),formbuilder_method:"addInput"},success:function(e){$(e).insertBefore(t.parents(".list-group-item").first()),formbuilder_disablesubmit(),formbuilder_sortable($(".inputs"))}})}function formbuilder_addoption_select(t){$.ajax({url:root_dir+"includes/classes/formbuilder.class.php",method:"post",dataType:"json",data:{id:$(this).parent(".structure").first().find("input[name='formid']").val(),formbuilder_method:"addOptionSelect"},success:function(e){$(e).insertBefore(t.parents(".list-group-item").first())}})}function formbuilder_addoption_radio(t){var e=t.parents(".list-group").first().children(".list-group-item:not(.actions)").length,a=t.parents(".input").first().find("input[name='inputid']").first().val();if(e>0)var n=!1;else n=!0;$.ajax({url:root_dir+"includes/classes/formbuilder.class.php",method:"post",dataType:"json",data:{id:$(this).parent(".structure").first().find("input[name='formid']").val(),inputId:a,isDefault:n,formbuilder_method:"addOptionRadio"},success:function(e){$(e).insertBefore(t.parents(".list-group-item").first())}})}function formbuilder_deleteitem(t){var e=t.val().split("Ã— ")[1].toLowerCase(),a=t.parents(".list-group").first(),n=t.parent(".input-group").find("input[type='radio']:checked").length;confirm("Are you sure you want to delete this "+e+"?")&&(t.parents(".list-group-item").first().remove(),"option"==e&&n>0&&a.find("input[type='radio']").first().prop("checked",!0),formbuilder_disablesubmit())}function formbuilder_disablesubmit(){$(".formbuilder").find("input[name='type'][value='submit']").length?($(".formbuilder select[name='inputType']").children("option[value='input_submit']").prop("disabled",!0),$(".formbuilder select[name='inputType']").children("option").prop("selected",!1)):$(".formbuilder select[name='inputType']").children("option[value='input_submit']").prop("disabled",!1)}function formbuilder_sortable(t){t.sortable({cancel:".actions",items:".list-group-item",containment:"parent",cancel:"input,textarea,select"})}function carousel_loadcontrols(t){t.find(".carousel-item:not(.additionalSlide)").each(function(){$(this).find(".carouselControls").length||($("<div class='carouselControls'><button type='button' class='btn btn-dark btnTop' name='carouselTextT' data-toggle='tooltip' data-placement='bottom' title='Text Align Top'><span class='fas fa-grip-lines'></span></button><button type='button' class='btn btn-dark' name='carouselTextM' data-toggle='tooltip' data-placement='bottom' title='Text Align Middle'><span class='fas fa-grip-lines'></span></button><button type='button' class='btn btn-dark btnBottom' name='carouselTextB' data-toggle='tooltip' data-placement='bottom' title='Text Align Bottom'><span class='fas fa-grip-lines'></span></button><button type='button' class='btn btn-dark' name='carouselTextL' data-toggle='tooltip' data-placement='bottom' title='Text Align Left'><span class='fas fa-align-left'></span></button><button type='button' class='btn btn-dark' name='carouselTextC' data-toggle='tooltip' data-placement='bottom' title='Text Align Center'><span class='fas fa-align-center'></span></button><button type='button' class='btn btn-dark' name='carouselTextR' data-toggle='tooltip' data-placement='bottom' title='Text Align Right'><span class='fas fa-align-right'></span></button><button type='button' class='btn btn-dark btnVertical' name='carouselTitleColor' data-toggle='tooltip' data-placement='bottom' title='Title Colour'><span class='fas fa-heading'></span><span class='fas fa-palette'></span></button><button type='button' class='btn btn-dark btnVertical' name='carouselTaglineColor' data-toggle='tooltip' data-placement='bottom' title='Tagline Colour'><span class='fas fa-paragraph'></span><span class='fas fa-palette'></span></button><button type='button' class='btn btn-dark' name='carouselImage' data-toggle='tooltip' data-placement='bottom' title='Choose Image'><span class='fas fa-image'></span></button><button type='button' class='btn btn-danger' name='carouselDelete' data-toggle='tooltip' data-placement='bottom' title='Delete Slide'><span class='fas fa-trash'></span></button></div>").prependTo($(this)),$("[data-toggle='tooltip']").tooltip()),carousel_checkimage($(this))})}function carousel_save(t){var e=$("input[name='carousel']");if(t.length&&e.length){var a=[],n=0;t.find(".carousel-item:not(.additionalSlide)").each(function(){var t=$(this).find("img.background").attr("src"),e=$(this).find("input[name='carouselTitle']").val(),i=$(this).find("input[name='carouselTagline']").val(),s=$(this).find("input[name='carouselTitle']").css("color"),o=$(this).find("input[name='carouselTagline']").css("color"),r=$(this).find("img.background").css("object-position"),l=$(this).find("input[name='carouselTitle']").css("text-align"),c=$(this).find(".carousel-item-inner").css("justify-content");a[n]={image:t,imageposition:r,title:e,titlecolor:s,tagline:i,taglinecolor:o,textalign:l,verticalalign:c},n++}),e.val(JSON.stringify(a))}else console.log("Err: Carousel cannot be saved")}function carousel_regen(t){var e=$("input[name='carousel']").val();$.ajax({url:window.location.pathname,method:"post",dataType:"json",data:{carouselid:t.attr("id").split("carousel")[1],carouseldata:e,method:"carouselRegen"},success:function(e){t.html($(e).html()),carousel_loadcontrols(t),$("input[name='carousel']").length>1&&$("input[name='carousel']").last().remove()}})}function carousel_addslide(t){var e=$("input[name='carousel']");if(t.length){carousel_save(t,e);var a=JSON.parse(e.val());a[a.length]={image:""},e.val(JSON.stringify(a)),carousel_regen(t),$(document).ajaxComplete(function(){t.find(".carousel-item.active").removeClass("active"),t.find(".carousel-item:not(.additionalSlide)").length?t.find(".carousel-item:not(.additionalSlide)").last().addClass("active"):t.find(".carousel-item").last().addClass("active")})}}function carousel_deleteslide(t){var e=$("input[name='carousel']"),a=t.parents(".carousel").first();confirm("Are you sure you want to delete this slide?")&&(t.remove(),$(".tooltip").remove(),carousel_save(a,e),carousel_regen(a))}function carousel_rf_callback(t){var e=$("#"+t).val();$("#img"+t).attr("src",e),$("#"+t).remove(),carousel_checkimage($("#img"+t).parents(".carousel-item").first())}function carousel_selectimage(t){var e=btoa(new Date).split("=")[0];t.find("img.background").remove(),t.prepend("<input type='hidden' id='"+e+"' name='"+e+"'>"),t.prepend("<img src='' class='background' id='img"+e+"'>"),$.fancybox.open({src:"js/responsive_filemanager/filemanager/dialog.php?type=1&field_id="+e+"&callback=carousel_rf_callback",type:"iframe"})}function carousel_textvertical(t,e){if(t.hasClass("carousel-item-inner"))switch(e){case"flex-start":case"center":case"flex-end":t.css("justify-content",e);break;case"centre":case"middle":t.css("justify-content","center");break;case"top":case"start":t.css("justify-content","flex-start");break;case"bottom":case"end":t.css("justify-content","flex-end");break;default:t.css("justify-content","")}}function carousel_textalign(t,e){switch(e){case"left":case"center":case"right":t.css("text-align",e);break;case"centre":case"middle":t.css("text-align","center");break;case"start":t.css("text-align","left");break;case"end":t.css("text-align","right");break;default:t.css("text-align","")}}function carousel_textcolor(t,e){for(var a="^rgb\\(",n=0;n<=2;n++)a+="([0-9]|[0-9][0-9]|[0-1][0-9][0-9]|2[0-4][0-9]|25[0-5])",n<2&&(a+="(,|,\\s)");a+="\\)$";var i=new RegExp(a,"gi"),s=new RegExp(a.replace(new RegExp("rgb","gi"),"rgba").replace("\\)$","(,|,\\s)([0-1]|0.[0-9]{1,2})\\)$"),"gi");/^\#([\da-fA-F]{3}){1,2}$/.test(e)?t.css("color",e):i.test(e)?t.css("color",e):s.test(e)?t.css("color",e):CSS_COLORS.includes(e.toLowerCase())?t.css("color",e.toLowerCase()):t.css("color","")}$(".sidebar").on("click","#toggleSidebar",function(){var t=$(this).parents(".sidebar").first();t.hasClass("collapse-left")?t.removeClass("collapse-left"):t.addClass("collapse-left")}),$(document).ready(function(){sidebarcollapse()}),$("form").submit(function(){var t=!0;if($(this).find(".invalid-feedback").remove(),$(this).find(".is-invalid").removeClass("is-invalid"),$(this).find("input[name='password']").length&&$(this).find("input[name='passwordConf']").length){var e=$(this).find("input[name='password']"),a=$(this).find("input[name='passwordConf']");(e.val().length||a.val().length)&&(e.val().length<8?(e.addClass("is-invalid"),$("<div class='invalid-feedback'>Password must be at least 8 characters</div>").insertAfter(e),t=!1):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/.test(e.val())?e.val()!=a.val()&&(e.addClass("is-invalid"),a.addClass("is-invalid"),$("<div class='invalid-feedback'>Passwords do not match</div>").insertAfter(a),t=!1):(e.addClass("is-invalid"),$("<div class='invalid-feedback'>Password must contain at least one lowercase, one uppercase and one digit</div>").insertAfter(e),t=!1))}if($(this).find("input[name='url']").length){var n=$(this).find("input[name='url']");/^[a-zA-Z0-9\:\/\-\_\+\?\&\=\#\.]+$/.test(n.val())||(n.addClass("is-invalid"),$("<div class='invalid-feedback'>Url contains invalid characters. Allowed characters are A-Z, 0-9, :, /, -, _, +, ?, &, =, #, .</div>").insertAfter(n),t=!1)}0!=t||event.preventDefault()}),$("input[name='url']").keyup(function(){var t=$(this);t.removeClass("is-invalid"),t.siblings(".invalid-feedback").remove(),/^[a-zA-Z0-9\:\/\-\_\+\?\&\=\#\.]+$/.test(t.val())||(t.addClass("is-invalid"),$("<div class='invalid-feedback'>Url contains invalid characters. Allowed characters are A-Z, 0-9, :, /, -, _, +, ?, &, =, #, .</div>").insertAfter(t))}),$("input[type='submit'][data-confirm]").click(function(){confirm($(this).attr("data-confirm"))||event.preventDefault()}),$("input[name='clearSearch'],input[name='returnList']").click(function(){window.location.href=window.location.href.split("?")[0]}),$("input[name='deleteContent']").click(function(){var t=$(this);confirm("Are you sure you want to delete this content?")&&t.attr("data-id").length&&$.ajax({url:window.location.pathname,method:"post",dataType:"json",data:{id:$(this).attr("data-id"),method:"deleteContent"},success:function(e){if("success"==e.status)location.reload();else{var a="<div class='alert alert-"+e.status+"'>"+e.message+"</div>";t.parents("table").first().length>0?(t.parents("table").first().find(".alert").remove(),$(a).insertBefore(t.parents("table").first())):(t.parents("form").first().find(".alert").remove(),$(a).appendTo(t.parents("form").first()))}}})}),$(".countChars").keyup(function(){var t=$(this).attr("maxlength"),e=$(this).val().length;$(this).siblings("small.charCount").length?$(this).siblings("small.charCount").text(e+" of "+t):$("<small class='charCount d-block text-end'>"+e+" of "+t+"</small>").insertAfter($(this))}),$("#otherSettings").submit(function(){var t=!0,e=$(this).find("input[name='googleAnalytics']");e.val().length&&!/^[A-Z]{2}\-[0-9]{8}\-[0-9]$/.test(e.val())&&(e.addClass("is-invalid"),$("<div class='invalid-feedback'>Value does not appear to be valid</div>").insertAfter(e),t=!1),0!=t||event.preventDefault()}),$("select[name='chooseMenu']").change(function(){window.location.href=window.location.href.split("manage-navigation/")[0]+"manage-navigation/"+$(this).val()}),$("#insertNavigation select[name='existing']").change(function(){var t=$(this).children(":selected"),e=t.attr("data-name"),a=t.attr("data-url");$("#insertNavigation").find("input[name='name']").val(e),$("#insertNavigation").find("input[name='url']").val(a)}),$(".structure").on("click","button[name='edit']",function(){$(this).parents(".navigationLevel").first().find(".modal").first().modal("show")}),$(".structure").on("click","button[name='delete']",function(){confirm("Are you sure you want to delete this item?")&&($(this).parents(".navigationLevel").first().find("input[name='delete']").first().val(1),$(this).parents(".navigationLevel").first().hide())}),$(".structureItems").sortable({items:".navigationLevel",connectWith:".structureItems",dropOnEmpty:!0,stop:function(){$(".structure .navigationLevel").each(function(){var t=$(this).prevAll(".navigationLevel").length,e=$(this).find(".modal").first();if($(this).parent().is(".structure"))var a=0;else a=$(this).parents(".navigationLevel").first().attr("data-id");e.find("input[name='parent']").val(a),e.find("input[name='position']").val(t)})}}),$(".structure input[name='saveStructure']").click(function(){var t={},e=$(this),a=$(this).parents(".structure").first(),n=0;if(a.find(".alert").remove(),a.find(".navigationLevel").each(function(){var e=$(this).children(".modal").first();t[n]={id:e.find("input[name='id']").val(),name:e.find("input[name='name']").val(),url:e.find("input[name='url']").val(),visible:e.find("select[name='visible']").val(),parent:e.find("input[name='parent']").val(),position:e.find("input[name='position']").val(),delete:e.find("input[name='delete']").val()},n++}),a.find(".is-invalid").length||a.find(".invalid-feedback").length)return event.preventDefault(),void $("<div class='alert alert-danger mt-3'>You have entered invalid information. Please check your inputs and try again.</div>").insertAfter(e.parent(".form-group"));a.find("input[name='json']").val(JSON.stringify(t))}),$("#manageForm").submit(function(){formbuilder_save($(this).find("input[name='structure']"))}),$(".formbuilder").on("click","input[name='addGroup']",function(){formbuilder_addgroup($(this))}),$(".formbuilder").on("click","input[name='addInput']",function(){formbuilder_addinput($(this))}),$(".formbuilder").on("click","input[name='addOptionSelect']",function(){formbuilder_addoption_select($(this))}),$(".formbuilder").on("click","input[name='addOptionRadio']",function(){formbuilder_addoption_radio($(this))}),$(".formbuilder").on("click","input[name='deleteGroup'], input[name='deleteInput'], input[name='deleteOption']",function(){formbuilder_deleteitem($(this))}),$(document).ready(function(){formbuilder_disablesubmit(),formbuilder_sortable($(".groups")),formbuilder_sortable($(".inputs"))}),$(".formbuilder").on("click","input[name='expander']",function(){"Expand"==$(this).val()?$(this).val("Collapse"):$(this).val("Expand")}),$("input[name='deleteForm']").click(function(){var t=$(this).attr("data-id");$(".contentInner").find(".alert").remove(),confirm("Are you sure you want to delete this form?")&&$.ajax({url:window.location.href,method:"post",dataType:"json",data:{id:t,deleteForm:!0},success:function(t){"success"==t.status?window.location.reload():$("<div class='alert alert-"+t.status+" mt-3'>"+t.deletemsg+"</div>").appendTo($(".contentInner > div:first-child"))}})}),$(".deleteRole").submit(function(){confirm("Are you sure you want to delete this role? All users set to this role will be changed to Standard users.")||event.preventDefault()}),$("input[name='deleteComment']").click(function(){var t=$(this);confirm("Are you sure you want to delete this comment? Any replies will also be hidden.")&&t.attr("data-id").length&&$.ajax({url:window.location.pathname,method:"post",dataType:"json",data:{id:$(this).attr("data-id"),method:"deleteComment"},success:function(e){if("success"==e.status)location.reload();else{var a="<div class='alert alert-"+e.status+"'>"+e.message+"</div>";t.parents("table").first().length>0?(t.parents("table").first().find(".alert").remove(),$(a).insertBefore(t.parents("table").first())):(t.parents("form").first().find(".alert").remove(),$(a).appendTo(t.parents("form").first()))}}})}),$("input[name='modifyComment']").click(function(){$(this).parents("table").first().find(".alert").remove();var t=$(this),e=t.attr("data-id"),a=t.parents("tr").first().find("textarea[name='comment']").val();if(t.siblings(".form-check").children("input[name='approved']").is(":checked"))var n=1;else n=0;t.attr("data-id").length&&$.ajax({url:window.location.pathname,method:"post",dataType:"json",data:{id:e,approved:n,comment:a,method:"modifyComment"},success:function(e){if("success"==e.status)location.reload();else{var a="<div class='alert alert-"+e.status+"'>"+e.message+"</div>";t.parents("table").first().length>0?(t.parents("table").first().find(".alert").remove(),$(a).insertBefore(t.parents("table").first())):(t.parents("form").first().find(".alert").remove(),$(a).appendTo(t.parents("form").first()))}}})}),$(document).ready(function(){$(".carousel.builder").length&&carousel_loadcontrols($(".carousel.builder"))}),$("#manageContent").submit(function(){$(this).find(".carousel.builder").length&&carousel_save($(this).find(".carousel.builder"))}),$("body").on("click","button[name='addCarousel']",function(){carousel_addslide($(this).parents(".carousel").first())}),$("body").on("click","button[name='carouselDelete']",function(){carousel_deleteslide($(this).parents(".carousel-item").first())}),$("body").on("click","button[name='carouselImage']",function(){carousel_selectimage($(this).parent(".carouselControls").siblings(".carousel-item-inner").first())}),$(".carousel.builder").on("click","button[name='carouselTextT'],button[name='carouselTextM'],button[name='carouselTextB']",function(){var t=$(this).attr("name").split("carouselText")[1],e=$(this).parents(".carousel-item").find(".carousel-item-inner").first();switch(t){case"T":carousel_textvertical(e,"flex-start");break;case"M":carousel_textvertical(e,"center");break;case"B":carousel_textvertical(e,"flex-end")}}),$(".carousel.builder").on("click","button[name='carouselTextL'],button[name='carouselTextC'],button[name='carouselTextR']",function(){var t=$(this).attr("name").split("carouselText")[1],e=$(this).parents(".carousel-item").find("input[name='carouselTitle']").first(),a=$(this).parents(".carousel-item").find("input[name='carouselTagline']").first();switch(t){case"L":carousel_textalign(e,"left"),carousel_textalign(a,"left");break;case"C":carousel_textalign(e,"center"),carousel_textalign(a,"center");break;case"R":carousel_textalign(e,"right"),carousel_textalign(a,"right");break;default:carousel_textalign(e,""),carousel_textalign(a,"")}});var carousel_textcolour=carousel_textcolor;function componentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function rgbToHex(t,e,a){return"#"+componentToHex(t)+componentToHex(e)+componentToHex(a)}function carousel_checkimage(t){var e=t.find("img.background");e.length&&e.attr("src").length&&!t.find(".carouselControls button[name='carouselImageH']").length&&!t.find(".carouselControls button[name='carouselImageV']").length&&$("<button type='button' class='btn btn-dark' name='carouselImageH' data-toggle='tooltip' data-placement='bottom' title='Image Horizontal'><span class='fas fa-arrows-alt-h'></span></button><button type='button' class='btn btn-dark' name='carouselImageV' data-toggle='tooltip' data-placement='bottom' title='Image Vertical'><span class='fas fa-arrows-alt-v'></span></button>").insertBefore(t.find(".carouselControls button[name='carouselDelete']"))}function carousel_imageposition(t,e,a){var n=t.css("object-position"),i=n.split(" ")[0].trim(),s=n.split(" ")[1].trim(),o="";""==e&&""==a?t.css("object-position",""):(/^(\-?)[\d]+(px|pt|em|rem|\%){1}$/.test(e)||(e=i),/^(\-?)[\d]+(px|pt|em|rem|\%){1}$/.test(a)||(a=s),o=e+" "+a,t.css("object-position",o))}$(".carousel.builder").on("click","button[name='carouselTitleColor'],button[name='carouselTaglineColor']",function(){$(this);var t="",e="";if("TitleColor"==$(this).attr("name").split("carousel")[1]?(t="Title",e=$(this).parents(".carousel-item").first().find("input[name='carouselTitle']").css("color")):"TaglineColor"==$(this).attr("name").split("carousel")[1]&&(t="Tagline",e=$(this).parents(".carousel-item").first().find("input[name='carouselTagline']").css("color")),e.indexOf("rgb")>=0||e.indexOf("rgba")>=0){var a,n,i,s=e.replace(new RegExp(/\s/,"g"),"").match(/[0-9]{0,3}/g),o=1;$.each(s,function(t,e){if(e.length&&o<=3){switch(o){case 1:a=e;break;case 2:n=e;break;case 3:i=e}o++}}),a.length&&n.length&&i.length&&(e=rgbToHex(parseInt(a),parseInt(n),parseInt(i)))}$(this).next(".carouselPicker").length?($(this).removeClass("hasInput"),$(this).next(".carouselPicker").remove()):($(this).addClass("hasInput"),$("<div class='carouselPicker'><input type='color' class='form-control form-control-color p-0' colorformat='rgb' name='carouselPicker"+t+"' data-color='"+e+"' value='"+e+"'></div>").insertAfter($(this)))}),$(".carousel.builder").on("change","input[type='color']",function(){carousel_textcolor($(this).parents(".carousel-item").first().find("input[name='carousel"+$(this).attr("name").split("carouselPicker")[1]+"']"),$(this).val())}),$(".carousel.builder").on("click","button[name='carouselImageH'],button[name='carouselImageV']",function(){var t=$(this).parents(".carousel-item").first().find("img.background").css("object-position"),e="",a=$(this).attr("name").split("carouselImage")[1];"H"==a?(e=t.split(" ")[0],a="Horizontal"):"V"==a&&(e=t.split(" ")[1],a="Vertical"),$(this).next(".carouselInput").length?($(this).removeClass("hasInput"),$(this).next(".carouselInput").remove()):($(this).addClass("hasInput"),$("<div class='carouselInput'><input type='text' class='form-control py-0 px-1' name='carouselImage"+a+"' placeholder='px, pt, em, rem, %' value='"+e+"'></div>").insertAfter($(this)))}),$(".carousel.builder").on("keyup","input[name='carouselImageHorizontal'],input[name='carouselImageVertical']",function(){var t="",e="",a=$(this).parents(".carouselControls").first();"Horizontal"==$(this).attr("name").split("carouselImage")[1]?(t=$(this).val(),e=a.find("input[name='carouselImageVertical']").length?a.find("input[name='carouselImageVertical']").val():""):"Vertical"==$(this).attr("name").split("carouselImage")[1]&&(t=a.find("input[name='carouselImageHorizontal']").length?a.find("input[name='carouselImageHorizontal']").val():"",e=$(this).val()),t=t.length?t:"50%",e=e.length?e:"50%",carousel_imageposition($(this).parents(".carousel-item").first().find("img.background"),t,e)}),$(document).keydown(function(t){if($(".carousel.builder input[name='carouselImageHorizontal'],.carousel.builder input[name='carouselImageVertical']").is(":focus")){var e=$(":focus");if(/^(\-?)[\d]+(px|pt|em|rem|\%){1}$/.test(e.val())){var a=parseInt(e.val()),n=e.val().split(a)[1];switch(t.which){case 38:a+=1,e.val(a+n);break;case 40:a-=1,e.val(a+n)}}}});